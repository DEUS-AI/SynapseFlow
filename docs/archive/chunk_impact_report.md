# Chunk Separation Impact Report

**Report ID:** impact_20260208_223732
**Generated:** 2026-02-08 22:37:32
**Processing Time:** 82ms

---

## Executive Summary

**Recommended Option:** keep_neo4j_with_indexes
**Confidence:** 59%

### Rationale

- Weighted score: 8.35 (highest among options)
- Implementation effort: 1 days
- Risk level: low
- Rollback complexity: none
- Data volume (13.5 MB) is manageable for Option A

## Data Metrics

| Metric | Value |
|--------|-------|
| Data Volume | 13.5 MB |
| Estimated Migration Time | 0.0 hours |
| Cross-Store Join Complexity | none |
| Consistency Risk | medium |

---

## Service Impact Analysis

| Service | Severity | Effort (hrs) | Refactoring Required |
|---------|----------|--------------|---------------------|
| RAGService | MEDIUM | 4 | Query needs to be rerouted to new chunk store... |
| DocumentRouter | HIGH | 8 | Requires cross-store join logic or denormalized ca... |
| Neo4jPDFIngestion | CRITICAL | 16 | Requires dual-write implementation or source abstr... |
| ExtractionAuditService | MEDIUM | 4 | Query needs to be rerouted to new chunk store... |
| ExtendedKGAuditService | MEDIUM | 4 | Query needs to be rerouted to new chunk store... |

### Total Effort Estimate

**Total Refactoring Effort:** 36 hours (4.5 days)

---

## Option Comparison

### Option A: Keep in Neo4j with Indexes

**Effort:** 1 day | **Risk:** Low | **Rollback:** None

**Pros:**
- No migration required
- All queries continue to work unchanged
- Zero downtime implementation

**Cons:**
- Neo4j memory continues to grow with chunks
- Limited scalability for very large document sets

### Option B: Move to PostgreSQL

**Effort:** 10 days | **Risk:** Medium | **Rollback:** Medium

**Pros:**
- Separates structural from semantic workloads
- Better text indexing capabilities
- Existing dual-write pattern available

**Cons:**
- Cross-store joins for Document→Chunk→Entity
- Consistency risk during dual-write

### Option C: Separate Neo4j Database

**Effort:** 20 days | **Risk:** High | **Rollback:** High

**Pros:**
- Complete workload isolation
- Independent scaling

**Cons:**
- Operational complexity (2 databases)
- Higher infrastructure costs
- Cross-database entity resolution

---

## Decision Criteria

| Criterion | Status |
|-----------|--------|
| Chunk Count Manageable | PASS |
| Low Consistency Risk | PASS |
| Simple Joins | PASS |
| Quick Implementation Needed | PASS |

## Recommended Next Steps

1. Run CREATE INDEX chunk_doc_idx FOR (c:Chunk) ON (c.document_id, c.id)
2. Add :StructuralChunk label to existing chunks
3. Set up monitoring for chunk-related query latencies
4. Define trigger criteria for escalation to Option B
5. Schedule monthly review of chunk growth metrics

---

*Generated by ChunkImpactAnalyzer*